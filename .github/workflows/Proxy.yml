
name: üåº Proxy T·ª± ƒë·ªông 3m

on:
  schedule:
    - cron: '*/3 * * * *'  # Ch·∫°y m·ªói 3 ph√∫t
  workflow_dispatch:

jobs:
  update-proxies:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: C·∫•u h√¨nh Git
        run: |
          git config --global user.name "GitHub Actions Bot"
          git config --global user.email "actions@github.com"

      - name: T·∫£i danh s√°ch proxy m·ªõi
        run: |
          echo "ƒêang t·∫£i proxy v√† ghi ƒë√® v√†o proxy.txt..."
          curl -s -o proxy.txt "https://api.proxyscrape.com/v4/free-proxy-list/get?request=display_proxies&proxy_format=protocolipport&format=text"
          
          # Log n·ªôi dung c·ªßa proxy.txt ƒë·ªÉ ki·ªÉm tra
          echo "N·ªôi dung c·ªßa proxy.txt:"
          cat proxy.txt

      - name: Commit v√† ƒë·∫©y thay ƒë·ªïi
        run: |
          git add proxy.txt
          git commit --allow-empty -m "CI: C·∫≠p nh·∫≠t proxy l√∫c $(date)"
          git push
